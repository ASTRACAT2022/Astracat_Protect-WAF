log:
  output: stdout
  format: json

acme:
  email: you@example.com
  ca: ""
  staging: false
  key_type: ""
  renew_window: ""
  storage_path: /data/acme

limits:
  rps: 20
  burst: 40
  conn_limit: 100
  ws_conn_limit: 20
  max_body_bytes: 10485760
  max_header_bytes: 1048576
  max_url_length: 2048
  risk_threshold: 5
  risk_ttl_seconds: 600
  risk_status_window: 60

challenge:
  enabled: true
  cookie_ttl_seconds: 1800
  bind_ip: true
  bind_ua: false
  exempt_globs:
    - /api/*
    - /cabinet/ws*
    - /.well-known/acme-challenge/*
    - /healthz
    - /metrics
    - '*.css'
    - '*.js'
    - '*.png'
    - '*.woff2'

servers:
  - hostname: panel.astracat.ru
    handles:
      - upstream: 172.18.0.4:3000

  - hostname: cabinet.astracat.ru
    handles:
      - matcher_name: api
        matcher:
          path_glob: /api/*
        strip_prefix: /api
        upstream: remnawave_bot:8080

      - matcher_name: ws
        matcher:
          path_glob: /cabinet/ws*
        upstream: remnawave_bot:8080

      - upstream: cabinet_frontend:80
